package main

import (
	"bufio"
	"fmt"
	"os"
)

type NODE struct {
	val byte
	next *NODE
}

//输入一个字符串，检测是否为回文字符串（采用找到中间阶段然后前半段倒序）
func main() {
	PreNode := NODE{'a', nil}
	input := bufio.NewScanner(os.Stdin)
	fmt.Printf("Please input: ")
	input.Scan()
	if 0 == len(input.Text()) {
		fmt.Println("error")
		os.Exit(-1)
	}
	cur := &PreNode
	temp := input.Text()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
	for i := 0; i < len(temp); i++ {
		p := new(NODE)
		p.val = temp[i]
		p.next = nil
		cur.next = p
		cur = cur.next
	}
	//定义一个快慢指针，找到中间节点
	fast, slow := &PreNode, &PreNode
	af := slow.next
	for {
		if fast.next != nil {
			fast = fast.next
			if fast.next != nil {
				fast = fast.next
			} else {
				fmt.Println("false")
				os.Exit(-1)
			}
			t1 := slow
			slow = af
			af = af.next
			slow.next = t1
		} else {
			break
		}
	}
	flag3 := true //是否为回文字符串的标志
	for {
		if af != nil {
			if af.val == slow.val {
				af = af.next
				slow = slow.next
			} else {
				fmt.Println("false")
				flag3 = false
				break
			}
		} else {
			break
		}
	}
	if flag3 == true {
		fmt.Println("true")
	}
}
